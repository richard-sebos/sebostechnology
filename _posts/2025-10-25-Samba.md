---
title: Samba on Oracle Linux 9 - Secure File Sharing for Mixed Environments
subtitle: Enable Controlled File Access Between Windows and Linux with This Step-by-Step Samba Guide
date: 2025-10-25 10:00 +0000
categories: [Linux, Infrastructure]
tags: [Samba, OracleLinux, FileSharing, LinuxAdmin, Security, SMB]
image:
  path: /assets/img/Samba_Init.png
  alt: Secure Samba file sharing setup on Oracle Linux 9 for mixed environments
---
> *Enable secure, controlled file sharing across Windows and Linux clients using Samba. This guide walks you through a basic setup, which forms the foundation for building a secure, maintainable file server.*

---

## üß∞ Introduction to Samba

I might be showing my gray hairs here, but *Samba* was one of the first open source projects I ever heard about‚Äîlong before I even knew what Linux was.

Back then, I was fresh out of university, working at a small company where the system administrator had set up a Samba server for shared drives across the office. It was one of those ‚ÄúLinux can do that?‚Äù moments that stuck with me.

Fast forward to today: even in the age of cloud storage and SaaS platforms, **on-premises file shares are still very much alive**. Samba remains relevant, shipping by default with many Linux distributions or available via core package repositories. Whether you're deploying a small home server or maintaining enterprise file services, Samba is still a reliable and versatile solution.

But what exactly *is* Samba?

---

## üìö Table of Contents

* [üß∞ Introduction to Samba](#-introduction-to-samba)
* [üì¶ What Is Samba?](#-what-is-samba)
* [üõ†Ô∏è Samba Setup: Layers to Watch](#Ô∏è-samba-setup-layers-to-watch)
* [üñ•Ô∏è Setup Environment](#Ô∏è-setup-environment)
* [üõ†Ô∏è Install Samba and Start Services](#Ô∏è-install-samba-and-start-services)
* [üóÇÔ∏è Plan and Create Share Structure](#Ô∏è-plan-and-create-share-structure)
* [üë• Set Up Users and Groups](#-set-up-users-and-groups)
* [‚öôÔ∏è Configure `smb.conf` for Secure Share Access](#Ô∏è-configure-smbconf-for-secure-share-access)
* [üõ°Ô∏è SELinux Integration](#Ô∏è-selinux-integration)
* [üß™ Test Share Access](#-test-share-access)
* [‚úÖ Conclusion](#-conclusion)
* [üß≠ Need a Quick Reference?](#-need-a-quick-reference)

---

## üì¶ What Is Samba?

Originally, **Samba** was created to centralize file storage when local disk space on workstations was limited and expensive. With a few spare hard drives, a Linux distro, and some patience, admins could spin up a Samba server to share files over a network using Windows-compatible protocols like SMB/CIFS.

Today, Samba is embedded everywhere‚Äîeven if you don‚Äôt realize it:

* It powers **home media servers**, streaming media to smart TVs, phones, and tablets.
* It serves as **centralized file storage** for teams, labs, and small businesses.
* It's the software layer inside many off-the-shelf **NAS appliances**, quietly enabling Windows-style file sharing.

If you've ever accessed `\\server\share`, there's a good chance Samba‚Äîor its commercial cousin‚Äîis behind the scenes.

---

## üõ†Ô∏è Samba Setup: Layers to Watch

Samba interacts with **multiple layers of system security**, which means getting a basic share working can be surprisingly complex. Even with a flawless `smb.conf`, things can still fail due to unrelated system-level issues.

I‚Äôve personally lost hours troubleshooting what I thought was a misconfiguration, only to discover it was a firewall rule, a Linux file permission, or SELinux quietly denying access.

Understanding these layers is key to both troubleshooting and securing Samba:

* üî• **Firewall:** Ensure required ports (`137`, `138`, `139`, `445`) are open.
* üë§ **Linux User Account:** Samba users must also exist as system users.
* üîê **Samba User Account:** Users must be added via `smbpasswd`.
* üß© **PAM Integration:** Some distros use PAM for authentication‚Äîbe aware of this layer.
* üõ°Ô∏è **SELinux / AppArmor:** Security modules can block Samba from accessing files.
* üìÅ **Filesystem Permissions:** Correct Linux ownership and mode bits are essential.

Planning for these up front can save hours of troubleshooting down the line.

---

## üñ•Ô∏è Setup Environment

This guide is based on:

* **OS:** Oracle Linux 9 (RHEL-compatible)
* **Services:** `smb` (Samba server daemon)

---

## üõ†Ô∏è Install Samba and Start Services

Install Samba and enable the service:

```bash
sudo dnf install samba samba-client samba-common -y
sudo systemctl enable --now smb
```

Configure the firewall to allow Samba traffic:

```bash
sudo firewall-cmd --permanent --add-service=samba
sudo firewall-cmd --reload
```

---

## üóÇÔ∏è Plan and Create Share Structure

We‚Äôll store shared folders in `/srv/samba`, following a clean, FHS-friendly layout:

```
/srv/samba/
‚îî‚îÄ‚îÄ share/        # Restricted share for authenticated users
```

Create the directory:

```bash
sudo mkdir -p /srv/samba/share
```

---

## üë• Set Up Users and Groups

First, create a Linux user account to access the Samba share. We‚Äôll disable shell login for this account:

```bash
sudo useradd -M -s /sbin/nologin smbuser
sudo smbpasswd -a smbuser
```

If you want to allow group-based access (e.g. a finance team):

```bash
# Create group and add users
sudo groupadd finance
sudo usermod -aG finance smbuser

# Set group ownership and permissions
sudo chown :finance /srv/samba/share
sudo chmod 770 /srv/samba/share
```

---

## ‚öôÔ∏è Configure `smb.conf` for Secure Share Access

Samba configuration is managed in `/etc/samba/smb.conf`.

A basic configuration includes:

* A `[global]` section for server-wide settings
* One or more share sections (e.g. `[SecureShare]`)

```ini
[global]
   workgroup = WORKGROUP
   security = user
   map to guest = Bad User

[SecureShare]
   path = /srv/samba/share
   valid users = @finance
   guest ok = no
   writable = yes
```

Apply changes:

```bash
sudo systemctl restart smb
```

---

## üõ°Ô∏è SELinux Integration

By default, SELinux does **not** allow Samba to access arbitrary directories. To make `/srv/samba` accessible:

```bash
sudo semanage fcontext -a -t samba_share_t "/srv/samba(/.*)?"
sudo restorecon -Rv /srv/samba
```

> ‚ö†Ô∏è **Note:** Avoid enabling `samba_export_all_rw` unless absolutely necessary. Using specific contexts (`samba_share_t`) is safer and more maintainable.

---

## üß™ Test Share Access

### From Linux:

```bash
smbclient -L //<server-ip> -U smbuser
smbclient //192.168.35.42/SecureShare -U smbuser
```

### From Windows:

In the File Explorer address bar:

```
\\<server-ip>\SecureShare
```

Login using the Samba credentials.

---

## ‚úÖ Conclusion

Samba remains a powerful tool for bridging Windows and Linux in mixed environments. In this guide, we covered:

* What Samba is and why it‚Äôs still relevant
* How to install and configure Samba on Oracle Linux 9
* How to set up both secure and group-based file shares
* How to navigate common security and system integration layers (like SELinux)

This foundational setup is preproduction-ready for small teams or homelabs. In the **next articles**, we‚Äôll dive deeper into adding additional security.

## üß≠ Need a Quick Reference?

If you're looking for commands, error fixes, or configuration tips while working with Samba:

‚û°Ô∏è Check out the companion article:
**[üß∞ Samba Admin Cheatsheet for Oracle Linux 9](https://richard-sebos.github.io/sebostechnology/posts/Samba-Cheatsheet/)

It includes:

* Common error resolutions
* Security best practices
* Test and validation commands
* Handy `systemctl` and `smbclient` usage

Perfect for troubleshooting and day-to-day Samba admin work!

---
**Need Linux expertise?** I help businesses streamline servers, secure infrastructure, and automate workflows. Whether you're troubleshooting, optimizing, or building from scratch‚ÄîI've got you covered.  
üì¨ Drop a comment or [email me](mailto:info@sebostechnology.com) to collaborate. For more tutorials, tools, and insights, visit [sebostechnology.com](https://sebostechnology.com).

‚òï Did you find this article helpful?
Consider supporting more content like this by buying me a coffee:
Buy Me A Coffee
Your support helps me write more Linux tips, tutorials, and deep dives.
